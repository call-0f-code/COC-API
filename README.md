# COC-API

This repository contains the common Express.js API for the backends of our Coding Club's websites , backed by PostgreSQL (via Prisma) and Supabase storage. Weâ€™re using **Bun** as our runtime.

## ğŸ“‚ Folder Structure

```
/
â”œâ”€â”€ prisma/                  # Prisma schema and migration files
â”‚   â”œâ”€â”€ schema.prisma
â”‚   â”œâ”€â”€ .env                 # your DATABASE_URL, etc.
â”‚   â””â”€â”€ migrations/          # autoâ€‘generated by `bun prisma migrate`
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/              # environment/configuration loaders
â”‚   â”‚   â””â”€â”€ index.ts         # loads process.env and exports typed config
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                  # database client initialization
â”‚   â”‚   â””â”€â”€ client.ts        # `export const prisma = new PrismaClient()`
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/              # Express route definitions
â”‚   â”‚   â”œâ”€â”€ index.ts         # main router that mounts subâ€‘routers
â”‚   â”‚   â”œâ”€â”€ members.ts
â”‚   â”‚   â”œâ”€â”€ projects.ts
â”‚   â”‚   â”œâ”€â”€ achievements.ts
â”‚   â”‚   â”œâ”€â”€ topics.ts
â”‚   â”‚   â”œâ”€â”€ questions.ts
â”‚   â”‚   â”œâ”€â”€ interviews.ts
â”‚   â”‚   â””â”€â”€ progress.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/         # controllers: take req â†’ call services â†’ send res
â”‚   â”‚   â”œâ”€â”€ member.controller.ts
â”‚   â”‚   â”œâ”€â”€ project.controller.ts
â”‚   â”‚   â”œâ”€â”€ achievement.controller.ts
â”‚   â”‚   â”œâ”€â”€ topic.controller.ts
â”‚   â”‚   â”œâ”€â”€ question.controller.ts
â”‚   â”‚   â”œâ”€â”€ interview.controller.ts
â”‚   â”‚   â””â”€â”€ progress.controller.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/            # business logic / Prisma queries
â”‚   â”‚   â”œâ”€â”€ member.service.ts
â”‚   â”‚   â”œâ”€â”€ project.service.ts
â”‚   â”‚   â”œâ”€â”€ achievement.service.ts
â”‚   â”‚   â”œâ”€â”€ topic.service.ts
â”‚   â”‚   â”œâ”€â”€ question.service.ts
â”‚   â”‚   â”œâ”€â”€ interview.service.ts
â”‚   â”‚   â””â”€â”€ progress.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/               # shared helpers (e.g. error wrappers, validators)
â”‚   â”‚   â””â”€â”€ apiError.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ app.ts               # configure Express app, mount routes, error handler
â”‚   â””â”€â”€ server.ts            # start HTTP server (calls `app.listen`)
â”‚
â”œâ”€â”€ tests/                   # integration and unit tests (Jest or Mocha)
â”‚   â”œâ”€â”€ members.test.ts
â”‚   â””â”€â”€ ...  
â”‚
â”œâ”€â”€ .env.example             # template for environment variables
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json            # TypeScript configuration
```

## ğŸš€ Getting Started

### Prerequisite

* Install [Bun](https://bun.sh/) on your machine.

### 1. Clone the repo

```bash
git clone https://github.com/your-org/coding-club-api.git
cd coding-club-api
```

### 2. Install dependencies

```bash
bun install
```

### 3. Configure environment

* Copy `.env.example` to `.env`
* Update `.env` with your Supabase/PostgreSQL connection URL and any other variables:

### 4. Initialize Prisma & Database

```bash
bun prisma migrate dev --name init
bun prisma generate
```

### 5. Run in development

```bash
bun run dev
```

* By default, the server listens on `http://localhost:3000`
* `app.ts` sets up your Express instance; `server.ts` starts the HTTP listener

### 6. Run tests

```bash
bun test
```

## ğŸ“¦ Scripts

| Command                         | Description                             |
| ------------------------------- | --------------------------------------- |
| `bun run dev`                   | Start the dev server with hot reloading |
| `bun prisma migrate dev --name` | Apply migrations in development         |
| `bun prisma generate`           | Generate Prisma client                  |
| `bun test`                      | Run tests (Jest or Mocha)               |

---

## ğŸ¤ Contributing

1. Fork the repo
2. Create your feature branch (`git checkout -b feature/XYZ`)
3. Commit your changes (`git commit -m "feat: add XYZ"`)
4. Push to the branch (`git push origin feature/XYZ`)
5. Open a Pull Request

---

## ğŸ“œ License

[GNU General Public License v3.0](LICENSE)

Happy coding!
